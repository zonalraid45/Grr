name: Upload Stockfish11 to Myshirt repo

on:
  workflow_dispatch: # Run manually
  # Uncomment below if you want it to run automatically every day
  # schedule:
  #   - cron: "0 0 * * *"

jobs:
  upload:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout current repo
        uses: actions/checkout@v4

      - name: Clone target repo (Myshirt)
        env:
          TOKEN: ${{ secrets.EXO }}
        run: |
          git clone https://$TOKEN@github.com/zonalraid45/Myshirt.git target_repo
          echo "✅ Cloned Myshirt repo"
          mkdir -p target_repo/engines

      - name: Copy stockfish11 into target repo
        run: |
          cp stockfish11 target_repo/engines/
          echo "✅ Copied stockfish11 to target_repo/engines/"

      - name: Commit and push changes to target repo
        env:
          TOKEN: ${{ secrets.EXO }}
        run: |
          cd target_repo
          git config user.name "github-actions[bot]"
          git config user.email "github-actions[bot]@users.noreply.github.com"
          git add engines/stockfish11
          git commit -m "Update Stockfish11 from source repo" || echo "No changes to commit"
          git push https://$TOKEN@github.com/zonalraid45/Myshirt.git main
          echo "✅ Changes pushed successfully!"
